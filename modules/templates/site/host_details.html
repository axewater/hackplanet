{% extends 'base.html' %}

{% block content %}
<div class="container">
    <div class="glass-panel">
        <h1>{{ host.name }} Details</h1>
        <p>OS: {{ host.os }}</p>
        <p>Difficulty: {{ host.difficulty }}</p>
        <p>IP: {{ host.ip }}</p>
        <p>Status: {{ 'Active' if host.status else 'Inactive' }}</p>
        <p>Rating: {{ host.rating }}</p>
        <p>Release Date: {{ host.release_date }}</p>
        <p>Hint: {{ host.hint }}</p>
        <head>
            <meta charset="utf-8">
            <title>Azure VM Manager</title>
            <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
            <style>
                body {
                    font-family: Arial, sans-serif;
                    max-width: 800px;
                    margin: 0 auto;
                    padding: 20px;
                }
                h1, h2 {
                    color: #0078D4;
                }
                form {
                    margin-bottom: 20px;
                }
                label, input, select, button {
                    margin: 5px 0;
                    display: block;
                }
                #result {
                    margin-top: 20px;
                }
            </style>
        </head>
        <body>
            <h1>Azure Status</h1>
            <p>Status: {{ auth_status.status }}</p>
            {% if auth_status.status == 'Authenticated' %}
            {% else %}
                <p>Error: {{ auth_status.details }}</p>
            {% endif %}

            <form id="vm-form" method="post" action="{{ url_for('main.manage_vm') }}">
                <input type="hidden" id="resource_group" name="resource_group" value="CTF">
                <input type="hidden" id="vm_name" name="vm_name" value="{{ host.azure_vm_id.split('/')[-1] if host.azure_vm_id else '' }}">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                
                <button type="button" id="start-btn" class="btn btn-success">Start VM</button>
                <button type="button" id="stop-btn" class="btn btn-danger">Stop VM</button>
                <button type="button" id="status-btn" class="btn btn-info">Check Status</button>
            </form>
            <div id="result"></div>
            <div id="loading" style="display: none;">Loading...</div>
            <script src="{{ url_for('static', filename='js/host_details.js') }}"></script>
        </body>
        </html>
        {% endblock %}
