{% extends 'base.html' %}

{% block content %}
{% with messages = get_flashed_messages() %}
{% if messages %}
<div>
    {% for message in messages %}
    <div class="alert alert-info" role="alert">{{ message }}</div>
    {% endfor %}
</div>
{% endif %}
{% endwith %}

<div class="container">
    <div class="glass-panel">
        <div class="labs_title">
            <h1>HackPlanet.EU Training Grounds</h1>
        </div>

        {% if no_labs %}
            <div class="alert alert-warning" role="alert">
                There are no labs defined. Please ask your administrator to define new labs.
                {% if is_admin %}
                    <a href="{{ url_for('main.lab_manager') }}" class="btn btn-primary">Go to Lab Manager</a>
                {% endif %}
            </div>
        {% else %}
            {% for lab in labs %}
            <div class="lab">
                <div class="labschip">
                    <h2>{{ lab.name }}</h2>
                    {% if lab.image %}
                    <img src="{{ url_for('static', filename='library/images/labs/' + lab.image) }}" alt="{{ lab.name }}" class="lab-image">
                    {% endif %}
                    {% if lab.vpn_file %}
                    <a href="{{ '/static/library/labs/' + lab.vpn_file }}" class="download-button btn btn-primary">Download Lab Access</a>
                    {% endif %}
                    <p>{{ lab.description }}</p>
                </div>

                <div class="hosts">
                    {% if lab in labs_without_hosts %}
                        <div class="alert alert-warning" role="alert">
                            There are no hosts defined for this lab.
                            {% if is_admin %}
                                <a href="{{ url_for('main.host_editor') }}" class="btn btn-primary">Add Host</a>
                            {% endif %}
                        </div>
                    {% else %}
                        {% for host in lab.hosts %}
                        <div class="host">
                            <!-- Host details here -->
                        </div>
                        {% endfor %}
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        {% endif %}
    </div>
</div>
{% endblock %}
